<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.13"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>Cells Documentation: Unit AI Implementation</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
        <script type="text/javascript" src="jquery.smartmenus.js"></script>
        <!-- SmartMenus jQuery Bootstrap Addon -->
        <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
        <!-- SmartMenus jQuery plugin -->
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">Cells Documentation </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="page_sw_architecture.html">SW Architecture</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_unit.html">Unit</a> AI Implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="el" href="class_unit.html">Unit</a> AI Implementation </h1>
<p>The image below shows the whole unit behaviour state machine, as held the by <a class="el" href="class_unit_ai_state_machine.html">UnitAiStateMachine</a>. Note, how player orders to units can interrupt almost all states for immediate execution of the order. In order for this to work, all states need to exit cleanly!</p>
<blockquote class="doxtable">
<p><b>You can click the behaviours and states to go to respective requirements and state implementations!</b> </p>
</blockquote>
<div class="image">
<object type="image/svg+xml" data="UnitAI_SM.svg">UnitAI_SM.svg</object>
<div class="caption">
The Unit AI State Machine</div></div>
 <h2>General stuff: </h2>
<ul>
<li>Battle start: the moment enemies are detected nearby a unit. Specific for each unit.</li>
<li>Battle end: the moment no enemies are any more nearby, also individually tracked per unit.</li>
<li>'Any' state: To make the SM more readable with order able to interrupt any other state, the 'any' state represents the state the SM is currently in. Transitions from 'any' state are listed directly with the SM component and are always valid.</li>
</ul>
<p>All <a class="el" href="class_unit.html">Unit</a> AI states are based on the <b><a class="el" href="classmechanics_1_1_unit_ai_base_state.html" title="Offers a base state for Unit AI which can be interrupted by multiple conditions: ">mechanics::UnitAiBaseState</a></b>, which offers each state to define possible interrupts, immediately triggering transitions. This can e.g. be used to abort a move state when taking damage.</p>
<h2>Idle Behaviour implementation<a class="anchor" id="unit_ai_idle_impl"></a></h2>
<p>As shown above, the <a class="el" href="page_unit_ai.html#unit_ai_idle">requirements</a> are realized by three states.</p>
<p>The <a class="el" href="classmechanics_1_1_idle_state.html" title="Realizes the &quot;Idle&quot; behaviour of units, for requirements, see Idle concept. ">mechanics::IdleState</a> and <a class="el" href="classmechanics_1_1_auto_attack_state.html" title="Realizes an &quot;auto attack&quot; behaviour, needed to realize guarding and attack move behaviours described ...">mechanics::AutoAttackState</a> rely on the <a class="el" href="classmechanics_1_1_attack_target_tracker.html" title="This is to implement the target selection, as described here: Target Selection. ">mechanics::AttackTargetTracker</a> to raise events for battle start and end, as well as target switching during battle.</p>
<p>The <a class="el" href="classmechanics_1_1_auto_gather_state.html" title="Transitionary state for decision whether and what to gather. ">mechanics::AutoGatherState</a> state then implements a method for food selection, according to the <a class="el" href="page_unit_ai.html#unit_ai_gather">Gather behaviour</a> requirements. AutoGather is only transitionary (one frame) and has thus no interrupt sources. After food selection, the gather behaviour is entered.</p>
<p>Importantly, after food selection a unit already reserves a slot to carry that food. The intention is to have a clear distribution of carriers among food items immediately after a battle. See <a class="el" href="classmechanics_1_1_gather_target_selector.html" title="Implements search and selection of a gather target (food). ">mechanics::GatherTargetSelector</a>.</p>
<h2>Gather Behaviour implementation<a class="anchor" id="unit_ai_gather_impl"></a></h2>
<p>Link to <a class="el" href="page_unit_ai.html#unit_ai_gather">requirements</a>. A food item has already been selected, a carry slot on the food reserved for the unit and the food been set as movement target, prior to this behaviour during <a class="el" href="classmechanics_1_1_auto_gather_state.html" title="Transitionary state for decision whether and what to gather. ">mechanics::AutoGatherState</a> or when the GatherOrder was given, as interpreted by the <a class="el" href="class_unit_ai_state_machine.html">UnitAiStateMachine</a>.</p>
<p>The following <a class="el" href="classmechanics_1_1_move_state.html" title="Can be used for all kinds of movement. ">mechanics::MoveState</a> is duplicated: one for interrupt by close enemies and one for interrupt only by taking damage (for the explicit gather order by the player).</p>
<p>Once the food is reached, the <a class="el" href="classmechanics_1_1_deliver_state.html" title="Implements parts of the Gather behaviour, where the food is picked up, transported and then dropped...">mechanics::DeliverState</a> takes over, see details there.</p>
<h2>Move Behaviour implementation<a class="anchor" id="unit_ai_move_impl"></a></h2>
<p>Link to <a class="el" href="page_unit_ai.html#unit_ai_move">requirements</a>. Only the <a class="el" href="classmechanics_1_1_move_state.html" title="Can be used for all kinds of movement. ">mechanics::MoveState</a> is necessary for this, without any interrupts set. The static move target (a world position) has to be set during command interpretation. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 17 2020 08:27:50 for Cells Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
        <script type="text/javascript" src="doxy-boot.js"></script>
</html>
